<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Target factory to run SQL code on a DuckDB database backend, keeping one
DuckDB file per target — tar_duck_r • flowme</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Target factory to run SQL code on a DuckDB database backend, keeping one
DuckDB file per target — tar_duck_r"><meta property="og:description" content="Creates a target that keeps a DBI connection to a DuckDB database, creating
one DuckDB file per target. With tar_duck_r() the user writes R code
and can interact with DuckDB's database directly via DBI (e.g.
dbGetQuery, dbExecute) or dbplyr-backed operations (so either write SQL
as strings or let dbplyr write the SQL for you). With tar_duck_rmd() the
user writes the code in a Rmd Notebook, basically to take advantage of sql
chunks to write pure SQL.
Watch out: this target factory does very unorthodox things! It does not
have much guardrails, it can be fragile and could probably break in
unexpected ways. We do ugly things here. There are side-effects all over the
place. It is still experimental and tailored to very specific use cases. See
details for a description of what it does, how it does it and why we decided
to do it that way. So, use it only if you can stomach all that -or if you are
part of the team and kind of have to ;)-"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-89TJ57C5XP"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-89TJ57C5XP');
</script><!-- dependencies from examples --><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet"><script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flowme</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/flowme.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/drakeme.html">drakeme</a>
    </li>
    <li>
      <a href="../articles/targetsme.html">targetsme</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/edalfon/flowme/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Target factory to run SQL code on a DuckDB database backend, keeping one
DuckDB file per target</h1>
    <small class="dont-index">Source: <a href="https://github.com/edalfon/flowme/blob/HEAD/R/tar_duck_r.R" class="external-link"><code>R/tar_duck_r.R</code></a>, <a href="https://github.com/edalfon/flowme/blob/HEAD/R/tar_duck_rmd.R" class="external-link"><code>R/tar_duck_rmd.R</code></a></small>
    <div class="hidden name"><code>tar_duck_r.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a target that keeps a <code>DBI</code> connection to a DuckDB database, creating
one DuckDB file per target. With <code>tar_duck_r()</code> the user writes R code
and can interact with DuckDB's database directly via <code>DBI</code> (e.g.
<code>dbGetQuery</code>, <code>dbExecute</code>) or <code>dbplyr</code>-backed operations (so either write SQL
as strings or let <code>dbplyr</code> write the SQL for you). With <code>tar_duck_rmd()</code> the
user writes the code in a Rmd Notebook, basically to take advantage of sql
chunks to write pure SQL.
<strong>Watch out:</strong> this target factory does very unorthodox things! It does not
have much guardrails, it can be fragile and could probably break in
unexpected ways. We do ugly things here. There are side-effects all over the
place. It is still experimental and tailored to very specific use cases. See
details for a description of what it does, how it does it and why we decided
to do it that way. So, use it only if you can stomach all that -or if you are
part of the team and kind of have to ;)-</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tar_duck_r</span><span class="op">(</span></span>
<span>  <span class="va">target_name</span>,</span>
<span>  <span class="va">command</span>,</span>
<span>  duckdb_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"./duckdb/"</span>,</span>
<span>    <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_language.html" class="external-link">tar_deparse_language</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">target_name</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  conn_name <span class="op">=</span> <span class="st">"db"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">tar_duck_rmd</span><span class="op">(</span></span>
<span>  <span class="va">sql_rmd</span>,</span>
<span>  duckdb_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"./duckdb/"</span>, <span class="va">target_name</span><span class="op">)</span>,</span>
<span>  target_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/make.names.html" class="external-link">make.names</a></span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path_file.html" class="external-link">path_ext_remove</a></span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path_file.html" class="external-link">path_file</a></span><span class="op">(</span><span class="va">sql_rmd</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  conn_name <span class="op">=</span> <span class="st">"db"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>target_name</dt>
<dd><p>target name, ala name in <code><a href="https://docs.ropensci.org/targets/reference/tar_target.html" class="external-link">targets::tar_target</a></code>.</p></dd>


<dt>command</dt>
<dd><p>R code to run the target, just like targets::tar_target, but
this code can (and should) take advantage of the connection to a DuckDB
database whose name is given by <code>conn_name</code>.</p></dd>


<dt>duckdb_path</dt>
<dd><p>path of the duckdb file. The default is to use the target
name as filename (without extension) and save it in a duckdb folder in the
current directory. It can be set to any relative or absolute path.</p></dd>


<dt>conn_name</dt>
<dd><p>name to give to the DBI connection to the DuckDB db.</p></dd>


<dt>sql_rmd</dt>
<dd><p>path to the Rmd file</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a custom target</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This target factory aims to support the following workflow / use case:</p><ul><li><p>Write SQL code in a Rmd file</p></li>
<li><p>Render the Rmd file, running the SQL code on a DuckDB database</p></li>
<li><p>Each Rmd file run against a single DuckDB file (persistent DB)
So typically each Rmd file creates one table in the DB, as part of some
data wrangling</p></li>
</ul><p>Let's keep here a list of the idiosyncrasies of this target factory:</p><ul><li><p>This is perhaps the most controversial: We are keeping the DBI connection
in the global environment. There might be a better way and we would need to
take a closer look at targets's environment management to find it. But
for now, this is working as we intended and you just have to be aware of
this, and of course, make sure you do not create conflicts by creating in
your code variables with the same name as the one given to the connection
(conn_name)</p></li>
<li><p>To keep it as flexible as possible, we do not want to use targets storage
for the DuckDB files. Instead, we decided to keep the files somewhere else
(duh, in the duckdb folder, or wherever you want, since you can simply pass
the full path to the target factory). In the targets storage we will keep
only some metadata to re-create the DBI connection.</p></li>
<li><p>So, what about the DBI connection? Well, connections are one of those
non-exportable objects that are tied to a given R session and cannot be
easily saved and simply read on another session. So that cannot be the
return value of the target. Typical workarounds for that in targets
include the use of custom functions to create and close the connection
after the job is done, and the use of hooks with similar purpose.
(https://books.ropensci.org/targets/targets.html#return-value).
<code>tar_duck_*</code> will create the DBI connection and close the connection behind
the scenes and make it available in the target's command environment, so
that the user's code can use it, just refering the object with the name
passed to <code>tar_duck_*</code> via <code>conn_name</code> argument.</p></li>
<li><p>So what does it mean to read/load a target that has already been built?
In other words, what is the return object of a <code>tar_duck_*</code> target?
We use a custom format, in which the read method does the heavy lifting.
Write method is simply a writeRDS, just like in any tar_target. But the
read method makes sure a DBI connection pointing to the duckdb file is
available. So the users should access the data they are interested in via
the DBI connection. Yet, the most common use case we have is one table per
target. Thus, if in the database of the target exists a table matching
the target's name, we also return a dplyr/dbplyr handle to the table.</p></li>
<li><p>But what about dependencies?, if you keep the data from each target in
separate duckdb files, how can I write a new target that uses data from
one or more upstream targets? Here <code>tar_duck_*</code> makes use of the ATTACH
functionality from duckdb. It makes sure to attach all duckdb files that
the current target depends on, to the current connection.</p></li>
<li><p>We are currently hashing the duckdb file when the target's command
finishes, and keep that data in the target's storage. We do this to make
sure changes will propagate downstream and potentially could be used to
detect changes in the data, made outside from the pipeline. Check TODOs.</p></li>
<li><p>to keep the target's scripts as concise as possible, for tar_duck_rmd,
we will use the filename of the Rmd as the name of the target (it's just a
default, you can override that by giving it explicitly other name)</p></li>
</ul><p>Why this?
Transitioning from a Postgres-backed data pipeline to use DuckDB, we hit a
couple of issues issue with the size of the file:
i) connecting/disconnecting to large files can be slow (EDIT: there have been
improvements recently and now DuckDB has "Lazy-loading of storage metadata
for faster startup times") and
ii) the files can get pretty big real quick,
which can cause storage issues (how big?, currently, one pipeline hit
almost 2TB).
To deal with this, we want to experiment with the also recently introduced
feature of DuckDB: ATTACH, which basically let's you connect to another
DuckDB database, that can be read from and written to, from within the
currently running DB/connection. So, the plan is to try and keep one table
per duckdb file, which should limit the individual file size to a typical
table size (i.e. around 25GB), thereby helping to solve or cirmcunvent the
issues above. So, instad of haven a monolitic DuckDB file with all the data,
we would have one file per table, and we can ATTACH other tables as needed
on-the-fly. Now, this can be cumbersome, because you need to handle each
connection and manually attach each DB you need, and then manually edit
DuckDB's search path to emulate one single database (or you would have to use
fully qualified names to refer to the tables, becasue ATTACH puts each file
in its own catalog). And here's where targets can be handy, because it is
super smart in handling dependencies and loading them on the fly. So the idea
is to leverage that power in a bunch of targets that handle the DBI
connection to each duckdb file, opening it and attaching dependencies on the
fly. Let's see how it goes ...</p>
    </div>
    <div id="functions">
    <h2>Functions</h2>
    
<ul><li><p><code>tar_duck_rmd()</code>: write the sql code in a Rmd Notebook</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>  <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_script.html" class="external-link">tar_script</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="co"># a couple of targets to ingest the data</span></span></span>
<span class="r-in"><span>      <span class="co"># (note the use of the DBI connection, named `db`)</span></span></span>
<span class="r-in"><span>      <span class="fu">flowme</span><span class="fu">::</span><span class="fu">tar_duck_r</span><span class="op">(</span><span class="va">band_members_duck</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to</a></span><span class="op">(</span><span class="va">db</span>, <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/band_members.html" class="external-link">band_members</a></span>, name <span class="op">=</span> <span class="st">"band_members_duck"</span>,</span></span>
<span class="r-in"><span>                       overwrite <span class="op">=</span> <span class="cn">TRUE</span>, temporary <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">}</span><span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>      <span class="fu">flowme</span><span class="fu">::</span><span class="fu">tar_duck_r</span><span class="op">(</span><span class="va">band_instruments_duck</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to</a></span><span class="op">(</span><span class="va">db</span>, <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/band_members.html" class="external-link">band_instruments</a></span>, name <span class="op">=</span> <span class="st">"band_instruments_duck"</span>,</span></span>
<span class="r-in"><span>                       overwrite <span class="op">=</span> <span class="cn">TRUE</span>, temporary <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">}</span><span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>      <span class="co"># a "normal" target that depends on both upstream targets</span></span></span>
<span class="r-in"><span>      <span class="co"># band_members_duck and band_instruments_duck. `tar_duck_r`'S</span></span></span>
<span class="r-in"><span>      <span class="co"># custom load mechanism makes sure you get a valid</span></span></span>
<span class="r-in"><span>      <span class="co"># dplyr/dbplyr handle to the table, stored in a DuckDB database.</span></span></span>
<span class="r-in"><span>      <span class="co"># None of the data have been fed into R, but everything operated</span></span></span>
<span class="r-in"><span>      <span class="co"># seamlessly on DuckDB. But since this is a normal target, to</span></span></span>
<span class="r-in"><span>      <span class="co"># save the results you need to collect and return them.</span></span></span>
<span class="r-in"><span>      <span class="co"># Notice here that although band_members_duck and</span></span></span>
<span class="r-in"><span>      <span class="co"># band_instruments_duck are stored in a separated DuckDB databases,</span></span></span>
<span class="r-in"><span>      <span class="co"># you can operate seamlessly on both of them simultaneously.</span></span></span>
<span class="r-in"><span>      <span class="fu">tar_target</span><span class="op">(</span><span class="va">join_to_targets</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="va">band_members_duck</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">band_instruments_duck</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># to collect the data from DuckDB into R</span></span></span>
<span class="r-in"><span>          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">}</span><span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>      <span class="co"># Now, if you want to keep operating on DuckDB (e.g. because the</span></span></span>
<span class="r-in"><span>      <span class="co"># output will also be larger than memory), you would keep using</span></span></span>
<span class="r-in"><span>      <span class="co"># `tar_duck_r`. So, similar as the above, but now it's again a</span></span></span>
<span class="r-in"><span>      <span class="co"># `tar_duck_r` target and the result of the join should be saved</span></span></span>
<span class="r-in"><span>      <span class="co"># in a duckdb file</span></span></span>
<span class="r-in"><span>      <span class="fu">flowme</span><span class="fu">::</span><span class="fu">tar_duck_r</span><span class="op">(</span><span class="va">join_to_duck</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="va">foo</span> <span class="op">&lt;-</span> <span class="va">band_members_duck</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">band_instruments_duck</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span></span>
<span class="r-in"><span>        <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to</a></span><span class="op">(</span><span class="va">db</span>, <span class="va">foo</span>, name <span class="op">=</span> <span class="st">"join_to_duck"</span>,</span></span>
<span class="r-in"><span>                       overwrite <span class="op">=</span> <span class="cn">TRUE</span>, temporary <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">}</span><span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>      <span class="cn">NULL</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_visnetwork.html" class="external-link">tar_visnetwork</a></span><span class="op">(</span><span class="op">)</span></span></span>
<div id="htmlwidget-625b5e7a979ce038f421" style="width:700px;height:432.632880098888px;" class="visNetwork html-widget "></div>
<script type="application/json" data-for="htmlwidget-625b5e7a979ce038f421">{"x":{"nodes":{"name":["band_instruments_duck","band_members_duck","join_to_duck","join_to_targets"],"type":["stem","stem","stem","stem"],"status":["outdated","outdated","outdated","outdated"],"seconds":[null,null,null,null],"bytes":[null,null,null,null],"branches":[null,null,null,null],"label":["band_instruments_duck","band_members_duck","join_to_duck","join_to_targets"],"color":["#78B7C5","#78B7C5","#78B7C5","#78B7C5"],"id":["band_instruments_duck","band_members_duck","join_to_duck","join_to_targets"],"level":[1,1,2,2],"shape":["dot","dot","dot","dot"]},"edges":{"from":["band_instruments_duck","band_members_duck","band_instruments_duck","band_members_duck"],"to":["join_to_targets","join_to_targets","join_to_duck","join_to_duck"],"arrows":["to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Stem"],"color":["#78B7C5","#899DA4"],"shape":["dot","dot"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script><span class="r-in"><span>  <span class="co"># After running tar_make() you will find a duckdb file for each of</span></span></span>
<span class="r-in"><span>  <span class="co"># the `tar_duck_r` targets above. Go check that.</span></span></span>
<span class="r-in"><span>  <span class="co"># See the testthat files for examples of `tar_duck_rmd`</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eduardo Alfonso-Sierra.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

